<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="org.n52.sos.ds.hibernate.entities.Procedure">
        <!--  procedureDescriptionFormat 1 is SensorML -->
        <subselect>
            SELECT
                @id:=@id+1 AS procedureId,
                'F'        AS hibernateDiscriminator,
                table_name AS identifier,
                'F'        AS deleted,
                NULL       AS description_file,
                'F'        AS reference
                1          AS procedureDescriptionFormat
            FROM (
                SELECT t.table_name
                FROM information_schema.tables AS t
                WHERE t.table_schema = 'sea'
                ORDER BY t.table_name
            ) AS t1, (SELECT @id:=0) AS t2;
        </subselect>
        <id name="procedureId" type="long" />
        <discriminator column="hibernateDiscriminator" type="org.hibernate.type.TrueFalseType" />
        <many-to-one name="procedureDescriptionFormat" class="org.n52.sos.ds.hibernate.entities.ProcedureDescriptionFormat" fetch="select" lazy="no-proxy" />
        <property name="identifier" type="string" />
        <property name="deleted" type="org.hibernate.type.TrueFalseType" />
        <property name="descriptionFile" type="org.hibernate.type.StringClobType" />
        <property name="reference" type="org.hibernate.type.TrueFalseType" />
    </class>
</hibernate-mapping>
